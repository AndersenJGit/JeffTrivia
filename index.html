<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Trivia: About Me</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #2E3440;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .card {
      background: #3B4252;
      padding: 2rem;
      border-radius: 12px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      text-align: center;
      color: #D8DEE9;
    }
    h1 { margin-top: 0; }
    select, button {
      width: 100%;
      padding: 0.6rem;
      margin-top: 1rem;
      font-size: 1rem;
      border-radius: 6px;
      border: none;
    }
    select { background: #4C566A; color: #D8DEE9; }
    button { background: #88C0D0; color: #2E3440; font-weight: bold; cursor: pointer; }
    .result { margin-top: 1rem; font-weight: bold; }
    .result.correct { color: #A3BE8C; }
    .result.wrong { color: #BF616A; }
    .feedback {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #E5E9F0;
      font-style: italic;
    }
    .stats {
      display: none;
      text-align: left;
      margin-top: 1rem;
      background: #4C566A;
      padding: 1rem;
      border-radius: 8px;
    }
    .stats h2 { margin-top: 0; }
    .stats p { margin: 0.5rem 0; }
    #toggleStats {
      background: #5E81AC;
      color: #D8DEE9;
      font-weight: normal;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Jeff's Daily Trivia</h1>
    <p id="question"></p>

    <select id="answerSelect">
      <option value="">--Choose your answer--</option>
    </select>
    <button id="submitBtn">Submit</button>

    <div class="result" id="result"></div>
    <div class="feedback" id="feedback"></div>

    <button id="toggleStats">Show Stats</button>
    <div class="stats" id="stats">
      <h2>Stats</h2>
      <p id="totalPlayed">Questions Played: 0</p>
      <p id="totalCorrect">Questions Correct: 0</p>
      <p id="currentStreak">Current Win Streak: 0</p>
    </div>
  </div>

  <script>
    const questions = [
      { 
        q: "What city do I want to visit the most?",
        a: "Tromso",
        options: ["Paris", "London", "Tokyo", "Tromso"],
        feedback: "For the Northern Lights and night-time scenery."
      },
      { 
        q: "What is my favorite type of food?",
        a: "Mexican",
        options: ["Mexican", "Italian", "Chinese", "American"],
        feedback: "Specifically from a taco truck."
      },
      { 
        q: "What kind of music do I listen to the most?",
        a: "Pop",
        options: ["Rock", "Hip Hop", "Pop", "RnB"],
        feedback: "This makes up most of my playlists."
      },
      { 
        q: "What is my biggest pet peeve?",
        a: "Being late",
        options: ["Loud chewing", "Being late", "Messy rooms", "Slow drivers"],
        feedback: "Especially when I'm waiting on someone else."
      },
      { 
        q: "What time of day am I most productive?",
        a: "Late Night",
        options: ["Early Morning", "Afternoon", "Evening", "Late Night"],
        feedback: "Caused by years of cramming before tests."
      },
      { 
        q: "What is my preferred way to spend a free weekend?",
        a: "Staying in",
        options: ["Going out", "Traveling", "Staying in", "Studying"],
        feedback: "Normally just hanging around the house with my roommates."
      },
      { 
        q: "What kind of movies do I usually prefer?",
        a: "Action",
        options: ["Action", "Comedy", "Psychological", "Romance"],
        feedback: "The best for entertainment without overthinking."
      },
      { 
        q: "What is my least favorite household chore?",
        a: "Doing dishes",
        options: ["Doing dishes", "Laundry", "Vacuuming", "Taking out trash"],
        feedback: "I've devolved to using one bowl for everything to reduce this chore."
      },
      { 
        q: "What is my favorite way to unwind after a long day?",
        a: "Watching videos",
        options: ["Reading", "Watching videos", "Going for a walk", "Sleeping"],
        feedback: "I end up doing this longer than I should."
      },
      { 
        q: "What is my favorite fast food place?",
        a: "Chipotle",
        options: ["McDonald's", "In-N-Out", "Taco Bell", "Chipotle"],
        feedback: "I could eat this every single day and not get tired of it."
      },
      { 
        q: "What video game have I played the most?",
        a: "Rocket League",
        options: ["League of Legends", "Rocket League", "Minecraft", "Call of Duty"],
        feedback: "I’ve sunk way more hours into this than I’d like to admit."
      },
      { 
        q: "What is my favorite movie of all time?",
        a: "The Truman Show",
        options: ["The Truman Show", "Tombstone", "Your Name", "Training Day"],
        feedback: "A perfect blend of comedy and plot development."
      },
      { 
        q: "What is my go-to drink order?",
        a: "Iced Coffee",
        options: ["Soda", "Brandy Old Fashioned", "Iced Coffee", "Water"],
        feedback: "Yes, even when it’s freezing outside."
      } 
    ];

    const today = new Date().toISOString().slice(0, 10);

    // ---- NEW SEQUENTIAL BASE-DAY LOGIC ----
    let baseDay = localStorage.getItem("trivia-baseDay");
    if (!baseDay) {
      baseDay = today;
      localStorage.setItem("trivia-baseDay", baseDay);
    }

    const daysSinceBase =
      Math.floor((new Date(today) - new Date(baseDay)) / (1000 * 60 * 60 * 24));

    const questionIndex = Math.min(daysSinceBase, questions.length - 1);
    const current = questions[questionIndex];
    // -------------------------------------

    const questionEl = document.getElementById("question");
    const selectEl = document.getElementById("answerSelect");
    const resultEl = document.getElementById("result");
    const feedbackEl = document.getElementById("feedback");
    const buttonEl = document.getElementById("submitBtn");

    questionEl.textContent = current.q;

    current.options.forEach(option => {
      const opt = document.createElement("option");
      opt.value = option;
      opt.textContent = option;
      selectEl.appendChild(opt);
    });

    let totalPlayed = parseInt(localStorage.getItem("trivia-totalPlayed") || "0");
    let totalCorrect = parseInt(localStorage.getItem("trivia-totalCorrect") || "0");
    let currentStreak = parseInt(localStorage.getItem("trivia-streak") || "0");

    const totalPlayedEl = document.getElementById("totalPlayed");
    const totalCorrectEl = document.getElementById("totalCorrect");
    const currentStreakEl = document.getElementById("currentStreak");

    function updateStats() {
      totalPlayedEl.textContent = "Questions Played: " + totalPlayed;
      totalCorrectEl.textContent = "Questions Correct: " + totalCorrect;
      currentStreakEl.textContent = "Current Win Streak: " + currentStreak;
    }
    updateStats();

    buttonEl.onclick = () => {
      const guess = selectEl.value;
      if (!guess) return;

      const correct = guess === current.a;

      // ---- UNCOMMENT THESE FOR FINAL VERSION ----
      const alreadyAnswered = localStorage.getItem("trivia-" + today);
      if (alreadyAnswered) return;
      // -------------------------------------------

      localStorage.setItem("trivia-" + today, correct ? "correct" : "wrong");

      totalPlayed++;
      if (correct) {
        totalCorrect++;
        currentStreak++;
      } else {
        currentStreak = 0;
      }

      localStorage.setItem("trivia-totalPlayed", totalPlayed);
      localStorage.setItem("trivia-totalCorrect", totalCorrect);
      localStorage.setItem("trivia-streak", currentStreak);

      resultEl.textContent = correct
        ? "✅ Correct!"
        : `❌ Not quite. The answer was: "${current.a}"`;
      resultEl.className = "result " + (correct ? "correct" : "wrong");
      feedbackEl.textContent = current.feedback;

      updateStats();
    };

    const toggleStatsBtn = document.getElementById("toggleStats");
    const statsEl = document.getElementById("stats");
    toggleStatsBtn.onclick = () => {
      statsEl.style.display = statsEl.style.display === "none" ? "block" : "none";
      toggleStatsBtn.textContent = statsEl.style.display === "none" ? "Show Stats" : "Hide Stats";
    };
  </script>
</body>
</html>
